<div class="quiz-container">
    <h2 class="text-2xl font-bold mb-4">Hosting Management Quiz</h2>
    <p class="mb-6">Test your knowledge of website hosting management concepts and best practices.</p>
    
    <form id="quiz-form" class="space-y-6">
        <div class="quiz-question bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
            <p class="font-medium text-lg mb-3">1. Which of the following is NOT a common hosting control panel?</p>
            <div class="space-y-2">
                <label class="flex items-start">
                    <input type="radio" name="q1" value="a" class="mt-1 mr-2">
                    <span>cPanel</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q1" value="b" class="mt-1 mr-2">
                    <span>Plesk</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q1" value="c" class="mt-1 mr-2">
                    <span>ServerAdmin</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q1" value="d" class="mt-1 mr-2">
                    <span>DirectAdmin</span>
                </label>
            </div>
            <div class="answer-feedback hidden mt-3 p-3 rounded-lg"></div>
        </div>

        <div class="quiz-question bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
            <p class="font-medium text-lg mb-3">2. What is the recommended frequency for backing up a dynamic website?</p>
            <div class="space-y-2">
                <label class="flex items-start">
                    <input type="radio" name="q2" value="a" class="mt-1 mr-2">
                    <span>Monthly</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q2" value="b" class="mt-1 mr-2">
                    <span>Weekly</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q2" value="c" class="mt-1 mr-2">
                    <span>Daily</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q2" value="d" class="mt-1 mr-2">
                    <span>Yearly</span>
                </label>
            </div>
            <div class="answer-feedback hidden mt-3 p-3 rounded-lg"></div>
        </div>

        <div class="quiz-question bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
            <p class="font-medium text-lg mb-3">3. Which of the following is a best practice for website backups?</p>
            <div class="space-y-2">
                <label class="flex items-start">
                    <input type="radio" name="q3" value="a" class="mt-1 mr-2">
                    <span>Store all backups only on your web server</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q3" value="b" class="mt-1 mr-2">
                    <span>Keep only the most recent backup</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q3" value="c" class="mt-1 mr-2">
                    <span>Store backups in multiple locations</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q3" value="d" class="mt-1 mr-2">
                    <span>Back up only your website files, not databases</span>
                </label>
            </div>
            <div class="answer-feedback hidden mt-3 p-3 rounded-lg"></div>
        </div>

        <div class="quiz-question bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
            <p class="font-medium text-lg mb-3">4. Before updating your website's software, what should you do first?</p>
            <div class="space-y-2">
                <label class="flex items-start">
                    <input type="radio" name="q4" value="a" class="mt-1 mr-2">
                    <span>Notify all website users</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q4" value="b" class="mt-1 mr-2">
                    <span>Create a backup</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q4" value="c" class="mt-1 mr-2">
                    <span>Update your hosting plan</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q4" value="d" class="mt-1 mr-2">
                    <span>Change your admin password</span>
                </label>
            </div>
            <div class="answer-feedback hidden mt-3 p-3 rounded-lg"></div>
        </div>

        <div class="quiz-question bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
            <p class="font-medium text-lg mb-3">5. Which of the following is NOT typically considered a security monitoring task?</p>
            <div class="space-y-2">
                <label class="flex items-start">
                    <input type="radio" name="q5" value="a" class="mt-1 mr-2">
                    <span>Malware scanning</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q5" value="b" class="mt-1 mr-2">
                    <span>Reviewing access logs</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q5" value="c" class="mt-1 mr-2">
                    <span>Updating content on your website</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q5" value="d" class="mt-1 mr-2">
                    <span>Monitoring login attempts</span>
                </label>
            </div>
            <div class="answer-feedback hidden mt-3 p-3 rounded-lg"></div>
        </div>

        <div class="quiz-question bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
            <p class="font-medium text-lg mb-3">6. Which tool would be most appropriate for transferring files to and from your web server?</p>
            <div class="space-y-2">
                <label class="flex items-start">
                    <input type="radio" name="q6" value="a" class="mt-1 mr-2">
                    <span>phpMyAdmin</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q6" value="b" class="mt-1 mr-2">
                    <span>FileZilla (FTP client)</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q6" value="c" class="mt-1 mr-2">
                    <span>Pingdom</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q6" value="d" class="mt-1 mr-2">
                    <span>MySQL Workbench</span>
                </label>
            </div>
            <div class="answer-feedback hidden mt-3 p-3 rounded-lg"></div>
        </div>

        <div class="quiz-question bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
            <p class="font-medium text-lg mb-3">7. Which of the following resources should you regularly monitor on your hosting account?</p>
            <div class="space-y-2">
                <label class="flex items-start">
                    <input type="radio" name="q7" value="a" class="mt-1 mr-2">
                    <span>Only disk space</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q7" value="b" class="mt-1 mr-2">
                    <span>Only bandwidth usage</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q7" value="c" class="mt-1 mr-2">
                    <span>Disk space, bandwidth, CPU usage, and database size</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q7" value="d" class="mt-1 mr-2">
                    <span>Only the number of visitors</span>
                </label>
            </div>
            <div class="answer-feedback hidden mt-3 p-3 rounded-lg"></div>
        </div>

        <div class="quiz-question bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
            <p class="font-medium text-lg mb-3">8. Which of the following is a recommended weekly maintenance task?</p>
            <div class="space-y-2">
                <label class="flex items-start">
                    <input type="radio" name="q8" value="a" class="mt-1 mr-2">
                    <span>Changing your hosting provider</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q8" value="b" class="mt-1 mr-2">
                    <span>Updating CMS core, plugins, and themes</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q8" value="c" class="mt-1 mr-2">
                    <span>Rebuilding your entire website</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q8" value="d" class="mt-1 mr-2">
                    <span>Changing all user passwords</span>
                </label>
            </div>
            <div class="answer-feedback hidden mt-3 p-3 rounded-lg"></div>
        </div>

        <div class="quiz-question bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
            <p class="font-medium text-lg mb-3">9. What should you NOT include in your hosting documentation?</p>
            <div class="space-y-2">
                <label class="flex items-start">
                    <input type="radio" name="q9" value="a" class="mt-1 mr-2">
                    <span>Server specifications</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q9" value="b" class="mt-1 mr-2">
                    <span>DNS configuration</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q9" value="c" class="mt-1 mr-2">
                    <span>Passwords in plain text</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q9" value="d" class="mt-1 mr-2">
                    <span>Backup procedures</span>
                </label>
            </div>
            <div class="answer-feedback hidden mt-3 p-3 rounded-lg"></div>
        </div>

        <div class="quiz-question bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
            <p class="font-medium text-lg mb-3">10. Which of the following might be a sign that you should consider changing hosting providers?</p>
            <div class="space-y-2">
                <label class="flex items-start">
                    <input type="radio" name="q10" value="a" class="mt-1 mr-2">
                    <span>Your website is running smoothly</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q10" value="b" class="mt-1 mr-2">
                    <span>Support responds quickly to your tickets</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q10" value="c" class="mt-1 mr-2">
                    <span>Frequent or extended downtime</span>
                </label>
                <label class="flex items-start">
                    <input type="radio" name="q10" value="d" class="mt-1 mr-2">
                    <span>Your hosting plan has all the features you need</span>
                </label>
            </div>
            <div class="answer-feedback hidden mt-3 p-3 rounded-lg"></div>
        </div>

        <button type="submit" class="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition duration-200">Submit Answers</button>
    </form>

    <div id="quiz-results" class="mt-6 hidden">
        <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
            <h3 class="text-xl font-bold mb-2">Quiz Results</h3>
            <p class="score-display mb-4">You scored: <span id="score">0</span> out of 10</p>
            <div id="pass-message" class="hidden p-3 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-lg mb-4">
                Congratulations! You've passed this quiz.
            </div>
            <div id="fail-message" class="hidden p-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-lg mb-4">
                You didn't pass this time. Review the chapter and try again.
            </div>
            <button id="retry-button" class="py-2 px-4 bg-gray-600 hover:bg-gray-700 text-white font-bold rounded-lg transition duration-200">Retry Quiz</button>
            <button id="review-button" class="ml-2 py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition duration-200">Review Answers</button>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const quizForm = document.getElementById('quiz-form');
    const quizResults = document.getElementById('quiz-results');
    const scoreDisplay = document.getElementById('score');
    const passMessage = document.getElementById('pass-message');
    const failMessage = document.getElementById('fail-message');
    const retryButton = document.getElementById('retry-button');
    const reviewButton = document.getElementById('review-button');
    
    const correctAnswers = {
        q1: 'c', // ServerAdmin
        q2: 'c', // Daily
        q3: 'c', // Store backups in multiple locations
        q4: 'b', // Create a backup
        q5: 'c', // Updating content on your website
        q6: 'b', // FileZilla (FTP client)
        q7: 'c', // Disk space, bandwidth, CPU usage, and database size
        q8: 'b', // Updating CMS core, plugins, and themes
        q9: 'c', // Passwords in plain text
        q10: 'c' // Frequent or extended downtime
    };
    
    const feedbackMessages = {
        q1: {
            correct: "Correct! ServerAdmin is not a common hosting control panel. cPanel, Plesk, and DirectAdmin are all popular control panels.",
            incorrect: "Incorrect. ServerAdmin is not a common hosting control panel. The common ones include cPanel, Plesk, and DirectAdmin."
        },
        q2: {
            correct: "Correct! Daily backups are recommended for dynamic websites that change frequently.",
            incorrect: "Incorrect. Daily backups are recommended for dynamic websites that change frequently."
        },
        q3: {
            correct: "Correct! Storing backups in multiple locations provides redundancy in case one backup location fails.",
            incorrect: "Incorrect. Storing backups in multiple locations provides redundancy in case one backup location fails."
        },
        q4: {
            correct: "Correct! Creating a backup before updating is essential so you can restore your site if something goes wrong.",
            incorrect: "Incorrect. Creating a backup before updating is essential so you can restore your site if something goes wrong."
        },
        q5: {
            correct: "Correct! Updating content is a content management task, not a security monitoring task.",
            incorrect: "Incorrect. Updating content is a content management task, not a security monitoring task."
        },
        q6: {
            correct: "Correct! FileZilla is an FTP client designed for transferring files to and from your web server.",
            incorrect: "Incorrect. FileZilla is an FTP client designed for transferring files to and from your web server."
        },
        q7: {
            correct: "Correct! You should monitor all these resources to ensure your hosting is performing optimally.",
            incorrect: "Incorrect. You should monitor all these resources (disk space, bandwidth, CPU usage, and database size) to ensure your hosting is performing optimally."
        },
        q8: {
            correct: "Correct! Updating your CMS, plugins, and themes weekly helps keep your site secure and functioning properly.",
            incorrect: "Incorrect. Updating your CMS, plugins, and themes weekly helps keep your site secure and functioning properly."
        },
        q9: {
            correct: "Correct! Passwords should never be stored in plain text for security reasons. Use a password manager instead.",
            incorrect: "Incorrect. Passwords should never be stored in plain text for security reasons. Use a password manager instead."
        },
        q10: {
            correct: "Correct! Frequent or extended downtime is a sign that you might need to consider changing hosting providers.",
            incorrect: "Incorrect. Frequent or extended downtime is a sign that you might need to consider changing hosting providers."
        }
    };
    
    quizForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        let score = 0;
        const questions = document.querySelectorAll('.quiz-question');
        
        questions.forEach((question, index) => {
            const questionNumber = index + 1;
            const selectedAnswer = document.querySelector(`input[name="q${questionNumber}"]:checked`);
            const feedbackDiv = question.querySelector('.answer-feedback');
            
            if (selectedAnswer) {
                if (selectedAnswer.value === correctAnswers[`q${questionNumber}`]) {
                    score++;
                    feedbackDiv.textContent = feedbackMessages[`q${questionNumber}`].correct;
                    feedbackDiv.classList.add('bg-green-100', 'dark:bg-green-900', 'text-green-700', 'dark:text-green-300');
                } else {
                    feedbackDiv.textContent = feedbackMessages[`q${questionNumber}`].incorrect;
                    feedbackDiv.classList.add('bg-red-100', 'dark:bg-red-900', 'text-red-700', 'dark:text-red-300');
                }
                feedbackDiv.classList.remove('hidden');
            }
        });
        
        scoreDisplay.textContent = score;
        
        if (score >= 7) {
            passMessage.classList.remove('hidden');
            failMessage.classList.add('hidden');
        } else {
            passMessage.classList.add('hidden');
            failMessage.classList.remove('hidden');
        }
        
        quizForm.classList.add('hidden');
        quizResults.classList.remove('hidden');
        
        // Send result to server
        const lessonId = 'website_hosting';
        const chapterId = 'hosting_management';
        const xhr = new XMLHttpRequest();
        xhr.open('POST', '/app/controllers/quiz_controller.php', true);
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhr.send(`action=submit_result&lesson_id=${lessonId}&chapter_id=${chapterId}&score=${score}&total=10`);
    });
    
    retryButton.addEventListener('click', function() {
        // Reset the form
        quizForm.reset();
        
        // Hide all feedback
        const feedbackDivs = document.querySelectorAll('.answer-feedback');
        feedbackDivs.forEach(div => {
            div.classList.add('hidden');
            div.classList.remove(
                'bg-green-100', 'dark:bg-green-900', 'text-green-700', 'dark:text-green-300',
                'bg-red-100', 'dark:bg-red-900', 'text-red-700', 'dark:text-red-300'
            );
        });
        
        // Show the form again
        quizForm.classList.remove('hidden');
        quizResults.classList.add('hidden');
    });
    
    reviewButton.addEventListener('click', function() {
        quizForm.classList.remove('hidden');
        // Keep results visible for reference
    });
});
</script>
